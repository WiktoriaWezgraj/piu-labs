<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>NodeList vs HTMLCollection + Events</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 30px;
    }
    .controls {
      margin-bottom: 12px;
    }
    button {
      margin: 4px;
      padding: 12px;
      min-width: 150px;
      cursor: pointer;
    }
    .counters {
      margin: 12px 0;
    }
    .board {
      margin: 12px auto;
      max-width: 750px;
      min-height: 160px;
      border: 2px dashed #ccc;
      padding: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      background: #fafafa;
    }
    .shape {
      width: 60px;
      height: 60px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.3s;
      border: 3px solid black;
    }
    .shape:hover {
      transform: scale(1.1);
    }
    .square {
      border-radius: 6px;
    }
    .circle {
      border-radius: 50%;
    }
    .note {
      color: #444;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <h2>
    NodeList vs HTMLCollection<br />
    Zdarzenia indywidualne vs delegowane
  </h2>

  <div class="controls">
    <button id="addSquare">Dodaj kwadrat</button>
    <button id="addCircle">Dodaj kółko</button>
    <button id="recolorSquares">Przekoloruj kwadraty</button>
    <button id="recolorCircles">Przekoloruj kółka</button>
  </div>

  <div class="counters">
    <span>Liczba kwadratów: <strong id="cntSquares">0</strong></span>
    &nbsp;|&nbsp;
    <span>Liczba kółek: <strong id="cntCircles">0</strong></span>
  </div>

  <div id="board" class="board" aria-label="pole z kształtami">
    <!-- tutaj będą dodawane shape -->
  </div>

  <p class="note">
    Kwadraty: <strong>indywidualne listenery</strong> (klik → usuń).<br>
    Kółka: <strong>delegacja</strong> — 
    jeden listener na kontenerze (klik → usuń).<br>
    Przekolorowanie kwadratów → <strong>NodeList</strong>
    (snapshot przy wywołaniu) <br>
    Przekolorowanie kółek → <strong>HTMLCollection</strong> 
    (żywa kolekcja).
  </p>

  <script>
    // elementy UI
    const addSquareBtn = document.getElementById('addSquare');
    const addCircleBtn = document.getElementById('addCircle');
    const recolorSquaresBtn = document.getElementById('recolorSquares');
    const recolorCirclesBtn = document.getElementById('recolorCircles');
    const cntSquaresEl = document.getElementById('cntSquares');
    const cntCirclesEl = document.getElementById('cntCircles');
    const board = document.querySelector('#board');

    // liczniki (oddzielne)
    let squaresCount = 0;
    let circlesCount = 0;
    // mała funkcja aktualizująca liczniki na UI
    function updateCounters() {
      cntSquaresEl.textContent = squaresCount;
      cntCirclesEl.textContent = circlesCount;
    }
    // helper: losowy kolor HSL
    function randomHsl() {
      return `hsl(${Math.floor(Math.random() * 360)}, 70%, 75%)`;
    }

    // ŻYWA kolekcja kółek (HTMLCollection) — pobieramy raz i używamy 
    const circlesLive = board.getElementsByClassName('circle');

    // KWADRAT: dodawany z indywidualnym listenerem 
    addSquareBtn.addEventListener('click', () => {
      const s = document.createElement('div');
      s.className = 'shape square';
      s.style.backgroundColor = randomHsl();
      s.addEventListener('click', () => {
        s.remove();
        squaresCount--;
        updateCounters();
      });
      board.appendChild(s);
      squaresCount++;
      updateCounters();
    });

    // KÓŁKO: dodawane BEZ indywidualnych listenerów, delegacja na board
    addCircleBtn.addEventListener('click', () => {
      const c = document.createElement('div');
      c.className = 'shape circle';
      c.style.backgroundColor = randomHsl();
      board.appendChild(c); // circlesLive samo się zaktualizuje!
      circlesCount++;
      updateCounters();
    });

    // Delegacja: jeden listener na 'board' obsługuje kliki w kółka
    board.addEventListener('click', (e) => {
      if (e.target?.classList?.contains('circle')) {
        e.target.remove();
        circlesCount--;
        updateCounters();
      }
    });

    // Przekolorowywanie kwadratów (NodeList ze querySelectorAll)
    recolorSquaresBtn.addEventListener('click', () => {
      // wyszukujemy istniejące w tym momencie kwadraty
      const squaresSnapshot = board.querySelectorAll('.square');
      squaresSnapshot.forEach(
        (el) => (el.style.backgroundColor = randomHsl())
      );
    });

    // Przekolorowywanie kółek (HTMLCollection - żywa kolekcja)
    recolorCirclesBtn.addEventListener('click', () => {
      // circlesLive to żywa kolekcja — nie trzeba niczego wyszukiwać
      for (const el of circlesLive) {
        el.style.backgroundColor = randomHsl();
      }
    });

    // Dodatkowo przykład pobieranie przy pomocy getElementsByTagName
    const allButtons = document.getElementsByTagName('button');
    for (const b of allButtons) {
      b.addEventListener('mouseenter', () => (b.style.opacity = '0.7'));
      b.addEventListener('mouseleave', () => (b.style.opacity = '1'));
    }

    // inicjacja liczników
    updateCounters();
  </script>
</body>
</html>